function PhotoFit(){this.photoListGroup=$(".photos-list-group")}PhotoFit.prototype.listenLoadAllDataEvent=function(){var s=this;antajax.get({url:"/photo/list/",success:function(t){if(200===t.code)for(var o=t.data,n=0;n<o.length;n++){var e=o[n],i=template("photos-item",{photo:e});s.photoListGroup.append(i);var a=s.photoListGroup.find(".photos-item:last");s.listenAddImageEvent(a),s.listenCloseBtnEvent(a),s.listenSavePhotoBtnEvent(a)}}})},PhotoFit.prototype.listenAddBannerUpEvent=function(){var t=this;$("#add-photo-btn").click(function(){6<=t.photoListGroup.children().length?window.messageBox.showInfo("只能添加6张图片哦~~"):t.createPhotoBtnEvent()})},PhotoFit.prototype.createPhotoBtnEvent=function(){var t=this,o=template("photos-item");t.photoListGroup.prepend(o);var n=t.photoListGroup.find(".photos-item:first");t.listenAddImageEvent(n),t.listenCloseBtnEvent(n),t.listenSavePhotoBtnEvent(n)},PhotoFit.prototype.listenAddImageEvent=function(t){var n=t.find(".thumbnail"),o=t.find(".image-input");n.click(function(){o.click()}),o.change(function(){var t=this.files[0],o=new FormData;o.append("file",t),antajax.post({url:"/upload/file/",data:o,processData:!1,contentType:!1,success:function(t){if(200===t.code){var o=t.data.url;n.attr("src",o)}}})})},PhotoFit.prototype.listenCloseBtnEvent=function(o){o.find(".close-btn").click(function(){var t=o.attr("data-photo-id");t?antalert.alertConfirm({text:"您确定要删除该照片吗？无法撤销哦！~~~",confirmCallback:function(){antajax.post({url:"/del/photo/",data:{photo_id:t},success:function(t){o.remove(),window.messageBox.showSuccess(t.message)}})}}):o.remove()})},PhotoFit.prototype.listenSavePhotoBtnEvent=function(t){var o=t.find(".save-btn"),n=t.find(".thumbnail");o.click(function(){var t=n.attr("src");antajax.post({url:"/save/photo/",data:{img_url:t},success:function(t){200===t.code?window.messageBox.showSuccess("图片保存成功！"):(console.log(t.code),console.log(t.message))},fail:function(t){console.log(t.message)}})})},PhotoFit.prototype.listenAddBannerEvent=function(){var t=this;$("#add-photo-btn").click(function(){t.createPhotoBtnEvent()})},PhotoFit.prototype.run=function(){this.listenAddBannerEvent(),this.listenLoadAllDataEvent()},$(function(){(new PhotoFit).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob3RvRml0LmpzIl0sIm5hbWVzIjpbIlBob3RvRml0IiwidGhpcyIsInBob3RvTGlzdEdyb3VwIiwiJCIsInByb3RvdHlwZSIsImxpc3RlbkxvYWRBbGxEYXRhRXZlbnQiLCJzZWxmIiwiYW50YWpheCIsImdldCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJwaG90b3MiLCJpIiwibGVuZ3RoIiwicGhvdG8iLCJ0cGwiLCJ0ZW1wbGF0ZSIsImFwcGVuZCIsInBob3RvSXRlbSIsImZpbmQiLCJsaXN0ZW5BZGRJbWFnZUV2ZW50IiwibGlzdGVuQ2xvc2VCdG5FdmVudCIsImxpc3RlblNhdmVQaG90b0J0bkV2ZW50IiwibGlzdGVuQWRkQmFubmVyVXBFdmVudCIsImNsaWNrIiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJjcmVhdGVQaG90b0J0bkV2ZW50IiwicHJlcGVuZCIsInRodW1ibmFpbCIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwicG9zdCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwiYXR0ciIsInBob3RvSWQiLCJhbnRhbGVydCIsImFsZXJ0Q29uZmlybSIsInRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJwaG90b19pZCIsInJlbW92ZSIsInNob3dTdWNjZXNzIiwic2F2ZUJ0biIsInRodW1ibmFpbFRhZyIsImltZ191cmwiLCJjb25zb2xlIiwibG9nIiwiZmFpbCIsImVycm9yIiwibGlzdGVuQWRkQmFubmVyRXZlbnQiLCJydW4iXSwibWFwcGluZ3MiOiJBQUVBLFNBQVNBLFdBQ0xDLEtBQUtDLGVBQWlCQyxFQUFFLHNCQUk1QkgsU0FBU0ksVUFBVUMsdUJBQXlCLFdBQ3hDLElBQUlDLEVBQU9MLEtBQ1hNLFFBQVFDLElBQUksQ0FDUkMsSUFBTyxlQUNQQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtB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bnRlbnQiOlsiXHJcbi8vIOa3u+WKoOeFp+eJh1xyXG5mdW5jdGlvbiBQaG90b0ZpdCgpIHtcclxuICAgIHRoaXMucGhvdG9MaXN0R3JvdXAgPSAkKFwiLnBob3Rvcy1saXN0LWdyb3VwXCIpO1xyXG59XHJcblxyXG4vLyDliqDovb3miYDmnIlwaG90b+S6i+S7tlxyXG5QaG90b0ZpdC5wcm90b3R5cGUubGlzdGVuTG9hZEFsbERhdGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGFudGFqYXguZ2V0KHtcclxuICAgICAgICAndXJsJzogJy9waG90by9saXN0LycsXHJcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGhvdG9zID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cGhvdG9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBob3RvID0gcGhvdG9zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgncGhvdG9zLWl0ZW0nLCB7J3Bob3RvJzogcGhvdG99KTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBob3RvTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDkuLrmlrDmt7vliqDnmoRwaG90b+a3u+WKoOWFs+mXreOAgeS/neWtmOS6i+S7tlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwaG90b0l0ZW0gPSBzZWxmLnBob3RvTGlzdEdyb3VwLmZpbmQoXCIucGhvdG9zLWl0ZW06bGFzdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlbkFkZEltYWdlRXZlbnQocGhvdG9JdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlbkNsb3NlQnRuRXZlbnQocGhvdG9JdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlblNhdmVQaG90b0J0bkV2ZW50KHBob3RvSXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIOmZkOWItuWPquiDveS4iuS8oDblvKDova7mkq3lm77kuovku7ZcclxuUGhvdG9GaXQucHJvdG90eXBlLmxpc3RlbkFkZEJhbm5lclVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQnRuID0gJChcIiNhZGQtcGhvdG8tYnRuXCIpO1xyXG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGhvdG9MZW5ndGggPSBzZWxmLnBob3RvTGlzdEdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgIGlmIChwaG90b0xlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKFwi5Y+q6IO95re75YqgNuW8oOWbvueJh+WTpn5+XCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlUGhvdG9CdG5FdmVudCgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDliJvlu7rljaHniYfnmoTmjInpkq7kuovku7ZcclxuUGhvdG9GaXQucHJvdG90eXBlLmNyZWF0ZVBob3RvQnRuRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyB0ZW1wbGF0ZSgp5Ye95pWw6L+U5Zue55qE5piv5a2X56ym5Liy77yM5LiN6IO95aSf5YW25re75Yqg54K55Ye75LqL5Lu277yMXHJcbiAgICAvLyDpnIDopoHlsIblhbbmt7vliqDlpKfnvZHpobXkuK3vvIzmiJDkuLrnvZHpobXkuK3nmoTmoIfnrb5cclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcInBob3Rvcy1pdGVtXCIpO1xyXG4gICAgc2VsZi5waG90b0xpc3RHcm91cC5wcmVwZW5kKHRwbCk7XHJcblxyXG4gICAgLy8g5re75Yqg54K55Ye75LqL5Lu25b+F6aG75Zyo5re75YqgdHBs5Yiw572R6aG15Lit5LmL5ZCOXHJcbiAgICB2YXIgcGhvdG9JdGVtID0gc2VsZi5waG90b0xpc3RHcm91cC5maW5kKFwiLnBob3Rvcy1pdGVtOmZpcnN0XCIpO1xyXG5cclxuICAgIHNlbGYubGlzdGVuQWRkSW1hZ2VFdmVudChwaG90b0l0ZW0pO1xyXG4gICAgc2VsZi5saXN0ZW5DbG9zZUJ0bkV2ZW50KHBob3RvSXRlbSk7XHJcbiAgICBzZWxmLmxpc3RlblNhdmVQaG90b0J0bkV2ZW50KHBob3RvSXRlbSk7XHJcbn07XHJcblxyXG4vLyDmt7vliqDngrnlh7vmt7vliqDlm77niYfkuovku7ZcclxuUGhvdG9GaXQucHJvdG90eXBlLmxpc3RlbkFkZEltYWdlRXZlbnQgPSBmdW5jdGlvbiAocGhvdG9JdGVtKSB7XHJcbiAgICB2YXIgdGh1bWJuYWlsID0gcGhvdG9JdGVtLmZpbmQoXCIudGh1bWJuYWlsXCIpO1xyXG4gICAgdmFyIGltYWdlSW5wdXQgPSBwaG90b0l0ZW0uZmluZChcIi5pbWFnZS1pbnB1dFwiKTtcclxuICAgIC8vIOS5n+WPr+S7pemAmui/h+S7peS4i+aWueW8j+eFp+W9k+W9k+WJjXRodW1ibmFpbOWQjOe6p+eahGltYWdlLWlucHV0XHJcbiAgICAvLyB2YXIgaW1hZ2VJbnB1dCA9IHRodW1ibmFpbC5zaWJsaW5ncyhcIi5pbWFnZS1pbnB1dFwiKTtcclxuXHJcbiAgICAvLyDkuLrlvZPliY3nmoTlm77niYfmt7vliqDngrnlh7vkuovku7ZcclxuICAgIHRodW1ibmFpbC5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g5Li65b2T5YmN6YCJ5Lit55qE5Zu+54mH5re75Yqg5omT5byA5LqL5Lu277yM5Y2zY2hhbmdlKCnkuovku7ZcclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDojrflj5blvZPliY3pgInkuK3nmoTmlofku7ZcclxuICAgICAgICAvLyB0aGlzLuS7o+ihqOW9k+WJjeeahGltYWdlLWlucHV0XHJcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIC8vIOmAmui/h0Zvcm1EYXRhKCnlh73mlbDliJvlu7rkuIDkuKrnqbrnmoTlr7nosaHvvIzkuYvlkI7lsLHlj6/ku6XpgJrov4dhcHBlbmQoKSxzZXQoKSxnZXQoKeetieWvueivpeWvueixoei/m+ihjOa3u+WKoO+8jOiuvue9ru+8jOiOt+WPluaTjeS9nFxyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIC8vIOS4iuS8oOWIsOacrOWcsOacjeWKoeWZqOeahOaOpeWPo+aYr+mAmui/hydmaWxlJ1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7XHJcbiAgICAgICAgYW50YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IFwiL3VwbG9hZC9maWxlL1wiLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbC5hdHRyKCdzcmMnLHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbi8vIOebkeWQrOWIoOmZpOWNoeeJh+eahOWFs+mXreaMiemSrlxyXG5QaG90b0ZpdC5wcm90b3R5cGUubGlzdGVuQ2xvc2VCdG5FdmVudCA9IGZ1bmN0aW9uIChwaG90b0l0ZW0pIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIC8vIHZhciBjbG9zZUJ0biA9ICQoXCIuY2xvc2UtYnRuXCIpO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gcGhvdG9JdGVtLmZpbmQoXCIuY2xvc2UtYnRuXCIpO1xyXG5cclxuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB2YXIgcGhvdG9JdGVtID0gJChcIi5waG90b3MtaXRlbVwiKTtcclxuICAgICAgICAvLyBwaG90b0l0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgdmFyIHBob3RvSWQgPSBwaG90b0l0ZW0uYXR0cihcImRhdGEtcGhvdG8taWRcIik7XHJcblxyXG4gICAgICAgIGlmIChwaG90b0lkKSB7XHJcbiAgICAgICAgICAgIGFudGFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAndGV4dCc6ICfmgqjnoa7lrpropoHliKDpmaTor6XnhafniYflkJfvvJ/ml6Dms5XmkqTplIDlk6bvvIF+fn4nLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbnRhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9kZWwvcGhvdG8vJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGhvdG9faWQnOiBwaG90b0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob3RvSXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKHJlc3VsdFsnbWVzc2FnZSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHBob3RvSXRlbS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIOebkeWQrOS/neWtmOWNoeeJh+eahOS6i+S7tlxyXG5QaG90b0ZpdC5wcm90b3R5cGUubGlzdGVuU2F2ZVBob3RvQnRuRXZlbnQgPSBmdW5jdGlvbiAocGhvdG9JdGVtKSB7XHJcbiAgICB2YXIgc2F2ZUJ0biA9IHBob3RvSXRlbS5maW5kKFwiLnNhdmUtYnRuXCIpO1xyXG4gICAgdmFyIHRodW1ibmFpbFRhZyA9IHBob3RvSXRlbS5maW5kKFwiLnRodW1ibmFpbFwiKTtcclxuICAgIHNhdmVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOiOt+WPlmltZ+WbvueJh+eahHNyY+WxnuaAp+WvueW6lOeahOWAvO+8jOWPqumcgOimgeiwg+eUqGF0dHIoKeWHveaVsOWwseWPr+S7peS6hu+8jOW5tuS4jemcgOimgeiwg+eUqHZhbCgpXHJcbiAgICAgICAgdmFyIGltZ191cmwgPSB0aHVtYm5haWxUYWcuYXR0cihcInNyY1wiKTtcclxuICAgICAgICBhbnRhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9zYXZlL3Bob3RvLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2ltZ191cmwnOiBpbWdfdXJsLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLlm77niYfkv53lrZjmiJDlip/vvIFcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdFsnY29kZSddKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRbJ21lc3NhZ2UnXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmYWlsJzogZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvclsnbWVzc2FnZSddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuUGhvdG9GaXQucHJvdG90eXBlLmxpc3RlbkFkZEJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGFkZFBob3RvQnRuID0gJChcIiNhZGQtcGhvdG8tYnRuXCIpO1xyXG4gICAgYWRkUGhvdG9CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuY3JlYXRlUGhvdG9CdG5FdmVudCgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuLy8g5o+Q5Y+W5pWw5o2uXHJcbi8vIGZ1bmN0aW9uIEV4dHJhY3REYXRhKCkge1xyXG4vLyAgICAgIHRoaXMuZGF0YUxpc3RHcm91cCA9ICQoXCIuZGF0YS1saXN0LWdyb3VwXCIpO1xyXG4vLyB9XHJcbi8vXHJcbi8vIC8vIOebkeWQrOWIm+W7uuaooeWei+S6i+S7tlxyXG4vLyBFeHRyYWN0RGF0YS5wcm90b3R5cGUubGlzdGVuQWRkTW9kZWxFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuLy8gICAgIHZhciBzZWxmID0gdGhpcztcclxuLy9cclxuLy8gfTtcclxuLy9cclxuLy8gLy8g5o+Q5Lqk5b2T5YmN54Wn54mHXHJcbi8vIEV4dHJhY3REYXRhLnByb3RvdHlwZS5saXN0ZW5FeHRyYWN0RGF0YUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4vL1xyXG4vLyAgICAgdmFyIGRhdGFJdGVtID0gc2VsZi5kYXRhTGlzdEdyb3VwLmZpbmQoXCIuZGF0YS1pdGVtOmxhc3RcIik7XHJcbi8vICAgICB2YXIgZXh0cmFjdERhdGFCdG4gPSBkYXRhSXRlbS5maW5kKFwiLmV4dHJhY3QtZGF0YS1idG5cIik7XHJcbi8vXHJcbi8vICAgICBleHRyYWN0RGF0YUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgY29uc29sZS5sb2coXCJoZWxsby0tLS0tLS0tXCIpO1xyXG4vLyAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImRhdGEtaXRlbVwiKTtcclxuLy8gICAgICAgICBzZWxmLmRhdGFMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4vLyAgICAgICAgIHZhciB0aHVtYm5haWxUYWcgPSBkYXRhSXRlbS5maW5kKFwiLnRodW1ibmFpbFwiKTtcclxuLy9cclxuLy8gICAgICAgICAvLyDojrflj5ZpbWflm77niYfnmoRzcmPlsZ7mgKflr7nlupTnmoTlgLzvvIzlj6rpnIDopoHosIPnlKhhdHRyKCnlh73mlbDlsLHlj6/ku6XkuobvvIzlubbkuI3pnIDopoHosIPnlKh2YWwoKVxyXG4vLyAgICAgICAgIHZhciBpbWdfdXJsID0gdGh1bWJuYWlsVGFnLmF0dHIoXCJzcmNcIik7XHJcbi8vXHJcbi8vICAgICAgICAgYW50YWpheC5wb3N0KHtcclxuLy8gICAgICAgICAgICAgJ3VybCc6ICcvZXh0cmFjdC9kYXRhLycsXHJcbi8vICAgICAgICAgICAgICdkYXRhJzoge1xyXG4vLyAgICAgICAgICAgICAgICAgJ2ltZ191cmwnOiBpbWdfdXJsLFxyXG4vLyAgICAgICAgICAgICB9LFxyXG4vLyAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuLy8gICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoXCLlm77niYflpITnkIbmiJDlip/vvIHvvIFcIik7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0WydkYXRhJ11bJ2RzdF9pbWFnZSddKTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH0pO1xyXG4vLyAgICAgfSk7XHJcbi8vXHJcbi8vIH07XHJcbi8vXHJcbi8vIEV4dHJhY3REYXRhLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpIHtcclxuLy8gICAgIHRoaXMubGlzdGVuRXh0cmFjdERhdGFFdmVudCgpO1xyXG4vLyB9O1xyXG4vL1xyXG5QaG90b0ZpdC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5BZGRCYW5uZXJFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5Mb2FkQWxsRGF0YUV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBwaG90byA9IG5ldyBQaG90b0ZpdCgpO1xyXG4gICAgcGhvdG8ucnVuKCk7XHJcblxyXG4gICAgLy8gdmFyIGRhdGEgPSBuZXcgRXh0cmFjdERhdGEoKTtcclxuICAgIC8vIGRhdGEucnVuKCk7XHJcbn0pOyJdfQ==
