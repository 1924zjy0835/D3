function PhotoFit(){this.photoListGroup=$(".photos-list-group")}PhotoFit.prototype.listenLoadAllDataEvent=function(){var s=this;antajax.get({url:"/photo/list/",success:function(t){if(200===t.code)for(var o=t.data,n=0;n<o.length;n++){var e=o[n],a=template("photos-item",{photo:e});s.photoListGroup.append(a);var i=s.photoListGroup.find(".photos-item:last");s.listenAddImageEvent(i),s.listenCloseBtnEvent(i),s.listenSavePhotoBtnEvent(i),s.listenExtractDataEvent(i)}}})},PhotoFit.prototype.listenAddBannerUpEvent=function(){var t=this;$("#add-photo-btn").click(function(){6<=t.photoListGroup.children().length?window.messageBox.showInfo("只能添加6张图片哦~~"):t.createPhotoBtnEvent()})},PhotoFit.prototype.createPhotoBtnEvent=function(){var t=this,o=template("photos-item");t.photoListGroup.prepend(o);var n=t.photoListGroup.find(".photos-item:first");t.listenAddImageEvent(n),t.listenCloseBtnEvent(n),t.listenSavePhotoBtnEvent(n),t.listenExtractDataEvent(n)},PhotoFit.prototype.listenAddImageEvent=function(t){var n=t.find(".thumbnail"),o=t.find(".image-input");n.click(function(){o.click()}),o.change(function(){var t=this.files[0],o=new FormData;o.append("file",t),antajax.post({url:"/upload/file/",data:o,processData:!1,contentType:!1,success:function(t){if(200===t.code){var o=t.data.url;n.attr("src",o)}}})})},PhotoFit.prototype.listenCloseBtnEvent=function(o){o.find(".close-btn").click(function(){var t=o.attr("data-photo-id");t?antalert.alertConfirm({text:"您确定要删除该照片吗？无法撤销哦！~~~",confirmCallback:function(){antajax.post({url:"/del/photo/",data:{photo_id:t},success:function(t){o.remove(),window.messageBox.showSuccess(t.message)}})}}):o.remove()})},PhotoFit.prototype.listenSavePhotoBtnEvent=function(t){var o=t.find(".save-btn"),n=t.find(".thumbnail");o.click(function(){var t=n.attr("src");antajax.post({url:"/save/photo/",data:{img_url:t},success:function(t){200===t.code?window.messageBox.showSuccess("图片保存成功！"):(console.log(t.code),console.log(t.message))},fail:function(t){console.log(t.message)}})})},PhotoFit.prototype.listenAddBannerEvent=function(){var t=this;$("#add-photo-btn").click(function(){t.createPhotoBtnEvent()})},PhotoFit.prototype.listenExtractDataEvent=function(o){o.find(".extract-data-btn").click(function(){var t=o.find(".thumbnail").attr("src");antajax.post({url:"/extract/data/",data:{img_url:t},success:function(t){200===t.code&&window.messageBox.showSuccess("图片处理成功！！")}})})},PhotoFit.prototype.run=function(){this.listenExtractDataEvent()},PhotoFit.prototype.run=function(){this.listenAddBannerEvent(),this.listenLoadAllDataEvent()},$(function(){(new PhotoFit).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob3RvRml0LmpzIl0sIm5hbWVzIjpbIlBob3RvRml0IiwidGhpcyIsInBob3RvTGlzdEdyb3VwIiwiJCIsInByb3RvdHlwZSIsImxpc3RlbkxvYWRBbGxEYXRhRXZlbnQiLCJzZWxmIiwiYW50YWpheCIsImdldCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJwaG90b3MiLCJpIiwibGVuZ3RoIiwicGhvdG8iLCJ0cGwiLCJ0ZW1wbGF0ZSIsImFwcGVuZCIsInBob3RvSXRlbSIsImZpbmQiLCJsaXN0ZW5BZGRJbWFnZUV2ZW50IiwibGlzdGVuQ2xvc2VCdG5FdmVudCIsImxpc3RlblNhdmVQaG90b0J0bkV2ZW50IiwibGlzdGVuRXh0cmFjdERhdGFFdmVudCIsImxpc3RlbkFkZEJhbm5lclVwRXZlbnQiLCJjbGljayIsImNoaWxkcmVuIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwiY3JlYXRlUGhvdG9CdG5FdmVudCIsInByZXBlbmQiLCJ0aHVtYm5haWwiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInBvc3QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImF0dHIiLCJwaG90b0lkIiwiYW50YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUNhbGxiYWNrIiwicGhvdG9faWQiLCJyZW1vdmUiLCJzaG93U3VjY2VzcyIsInNhdmVCdG4iLCJ0aHVtYm5haWxUYWciLCJpbWdfdXJsIiwiY29uc29sZSIsImxvZyIsImZhaWwiLCJlcnJvciIsImxpc3RlbkFkZEJhbm5lckV2ZW50IiwicnVuIl0sIm1hcHBpbmdzIjoiQUFFQSxTQUFTQSxXQUNMQyxLQUFLQyxlQUFpQkMsRUFBRSxzQkFJNUJILFNBQVNJLFVBQVVDLHVCQUF5QixXQUN4QyxJQUFJQyxFQUFPTCxLQUNYTSxRQUFRQyxJQUFJLENBQ1JDLElBQU8sZUFDUEMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUViLElBREEsSUFBSUMsRUFBU0QsRUFBYSxLQUNqQkUsRUFBRSxFQUFHQSxFQUFFRCxFQUFPRSxPQUFRRCxJQUFLLENBQ2hDLElBQUlFLEVBQVFILEVBQU9DLEdBQ2ZHLEVBQU1DLFNBQVMsY0FBZSxDQUFDRixNQUFTQSxJQUM1Q1QsRUFBS0osZUFBZWdCLE9BQU9GLEdBRzNCLElBQUlHLEVBQVliLEVBQUtKLGVBQWVrQixLQUFLLHFCQUN6Q2QsRUFBS2Usb0JBQW9CRixHQUN6QmIsRUFBS2dCLG9CQUFvQkgsR0FDekJiLEVBQUtpQix3QkFBd0JKLEdBQzdCYixFQUFLa0IsdUJBQXVCTCxRQVFoRG5CLFNBQVNJLFVBQVVxQix1QkFBeUIsV0FDeEMsSUFBSW5CLEVBQU9MLEtBQ0VFLEVBQUUsa0JBQ1J1QixNQUFNLFdBRVUsR0FERHBCLEVBQUtKLGVBQWV5QixXQUFXYixPQUU3Q2MsT0FBT0MsV0FBV0MsU0FBUyxlQUcvQnhCLEVBQUt5Qix5QkFLYi9CLFNBQVNJLFVBQVUyQixvQkFBc0IsV0FDckMsSUFBSXpCLEVBQU9MLEtBR1BlLEVBQU1DLFNBQVMsZUFDbkJYLEVBQUtKLGVBQWU4QixRQUFRaEIsR0FHNUIsSUFBSUcsRUFBWWIsRUFBS0osZUFBZWtCLEtBQUssc0JBRXpDZCxFQUFLZSxvQkFBb0JGLEdBQ3pCYixFQUFLZ0Isb0JBQW9CSCxHQUN6QmIsRUFBS2lCLHdCQUF3QkosR0FDN0JiLEVBQUtrQix1QkFBdUJMLElBSWhDbkIsU0FBU0ksVUFBVWlCLG9CQUFzQixTQUFVRixHQUMvQyxJQUFJYyxFQUFZZCxFQUFVQyxLQUFLLGNBQzNCYyxFQUFhZixFQUFVQyxLQUFLLGdCQUtoQ2EsRUFBVVAsTUFBTSxXQUNaUSxFQUFXUixVQUlmUSxFQUFXQyxPQUFPLFdBR2QsSUFBSUMsRUFBT25DLEtBQUtvQyxNQUFNLEdBRWxCQyxFQUFXLElBQUlDLFNBRW5CRCxFQUFTcEIsT0FBTyxPQUFRa0IsR0FDeEI3QixRQUFRaUMsS0FBSyxDQUNUL0IsSUFBTyxnQkFDUGdDLEtBQVFILEVBQ1JJLGFBQWUsRUFDZkMsYUFBZSxFQUNmakMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCLElBQUlGLEVBQU1FLEVBQWEsS0FBTyxJQUM5QnNCLEVBQVVXLEtBQUssTUFBTW5DLFVBU3pDVCxTQUFTSSxVQUFVa0Isb0JBQXNCLFNBQVVILEdBR2hDQSxFQUFVQyxLQUFLLGNBRXJCTSxNQUFNLFdBR1gsSUFBSW1CLEVBQVUxQixFQUFVeUIsS0FBSyxpQkFFekJDLEVBQ0FDLFNBQVNDLGFBQWEsQ0FDbEJDLEtBQVEsdUJBQ1JDLGdCQUFtQixXQUNmMUMsUUFBUWlDLEtBQUssQ0FDVC9CLElBQU8sY0FDUGdDLEtBQVEsQ0FDSlMsU0FBWUwsR0FFaEJuQyxRQUFXLFNBQVVDLEdBQ2pCUSxFQUFVZ0MsU0FDVnZCLE9BQU9DLFdBQVd1QixZQUFZekMsRUFBZ0IsZUFNOURRLEVBQVVnQyxZQU10Qm5ELFNBQVNJLFVBQVVtQix3QkFBMEIsU0FBVUosR0FDbkQsSUFBSWtDLEVBQVVsQyxFQUFVQyxLQUFLLGFBQ3pCa0MsRUFBZW5DLEVBQVVDLEtBQUssY0FDbENpQyxFQUFRM0IsTUFBTSxXQUVWLElBQUk2QixFQUFVRCxFQUFhVixLQUFLLE9BQ2hDckMsUUFBUWlDLEtBQUssQ0FDVC9CLElBQU8sZUFDUGdDLEtBQVEsQ0FDSmMsUUFBV0EsR0FFZjdDLFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxLQUNiaUIsT0FBT0MsV0FBV3VCLFlBQVksWUFFOUJJLFFBQVFDLElBQUk5QyxFQUFhLE1BQ3pCNkMsUUFBUUMsSUFBSTlDLEVBQWdCLFdBR3BDK0MsS0FBUSxTQUFVQyxHQUNkSCxRQUFRQyxJQUFJRSxFQUFlLGVBTzNDM0QsU0FBU0ksVUFBVXdELHFCQUF1QixXQUN0QyxJQUFJdEQsRUFBT0wsS0FDT0UsRUFBRSxrQkFDUnVCLE1BQU0sV0FDZHBCLEVBQUt5Qix5QkFLYi9CLFNBQVNJLFVBQVVvQix1QkFBeUIsU0FBVUwsR0FFN0JBLEVBQVVDLEtBQUsscUJBRXJCTSxNQUFNLFdBR2pCLElBR0k2QixFQUhlcEMsRUFBVUMsS0FBSyxjQUdQd0IsS0FBSyxPQUloQ3JDLFFBQVFpQyxLQUFLLENBQ1QvQixJQUFPLGlCQUNQZ0MsS0FBUSxDQUNKYyxRQUFXQSxHQUVmN0MsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE1BQ2JpQixPQUFPQyxXQUFXdUIsWUFBWSxrQkFTbERwRCxTQUFTSSxVQUFVeUQsSUFBTSxXQUNyQjVELEtBQUt1QiwwQkFHVHhCLFNBQVNJLFVBQVV5RCxJQUFNLFdBQ3JCNUQsS0FBSzJELHVCQUNMM0QsS0FBS0ksMEJBR1RGLEVBQUUsWUFDYyxJQUFJSCxVQUNWNkQiLCJmaWxlIjoicGhvdG9GaXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8vIOa3u+WKoOeFp+eJh1xyXG5mdW5jdGlvbiBQaG90b0ZpdCgpIHtcclxuICAgIHRoaXMucGhvdG9MaXN0R3JvdXAgPSAkKFwiLnBob3Rvcy1saXN0LWdyb3VwXCIpO1xyXG59XHJcblxyXG4vLyDliqDovb3miYDmnIlwaG90b+S6i+S7tlxyXG5QaG90b0ZpdC5wcm90b3R5cGUubGlzdGVuTG9hZEFsbERhdGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIGFudGFqYXguZ2V0KHtcclxuICAgICAgICAndXJsJzogJy9waG90by9saXN0LycsXHJcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGhvdG9zID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cGhvdG9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBob3RvID0gcGhvdG9zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgncGhvdG9zLWl0ZW0nLCB7J3Bob3RvJzogcGhvdG99KTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBob3RvTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDkuLrmlrDmt7vliqDnmoRwaG90b+a3u+WKoOWFs+mXreOAgeS/neWtmOS6i+S7tlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwaG90b0l0ZW0gPSBzZWxmLnBob3RvTGlzdEdyb3VwLmZpbmQoXCIucGhvdG9zLWl0ZW06bGFzdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlbkFkZEltYWdlRXZlbnQocGhvdG9JdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlbkNsb3NlQnRuRXZlbnQocGhvdG9JdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlblNhdmVQaG90b0J0bkV2ZW50KHBob3RvSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0ZW5FeHRyYWN0RGF0YUV2ZW50KHBob3RvSXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIOmZkOWItuWPquiDveS4iuS8oDblvKDova7mkq3lm77kuovku7ZcclxuUGhvdG9GaXQucHJvdG90eXBlLmxpc3RlbkFkZEJhbm5lclVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQnRuID0gJChcIiNhZGQtcGhvdG8tYnRuXCIpO1xyXG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGhvdG9MZW5ndGggPSBzZWxmLnBob3RvTGlzdEdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgIGlmIChwaG90b0xlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKFwi5Y+q6IO95re75YqgNuW8oOWbvueJh+WTpn5+XCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlUGhvdG9CdG5FdmVudCgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDliJvlu7rljaHniYfnmoTmjInpkq7kuovku7ZcclxuUGhvdG9GaXQucHJvdG90eXBlLmNyZWF0ZVBob3RvQnRuRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyB0ZW1wbGF0ZSgp5Ye95pWw6L+U5Zue55qE5piv5a2X56ym5Liy77yM5LiN6IO95aSf5YW25re75Yqg54K55Ye75LqL5Lu277yMXHJcbiAgICAvLyDpnIDopoHlsIblhbbmt7vliqDlpKfnvZHpobXkuK3vvIzmiJDkuLrnvZHpobXkuK3nmoTmoIfnrb5cclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcInBob3Rvcy1pdGVtXCIpO1xyXG4gICAgc2VsZi5waG90b0xpc3RHcm91cC5wcmVwZW5kKHRwbCk7XHJcblxyXG4gICAgLy8g5re75Yqg54K55Ye75LqL5Lu25b+F6aG75Zyo5re75YqgdHBs5Yiw572R6aG15Lit5LmL5ZCOXHJcbiAgICB2YXIgcGhvdG9JdGVtID0gc2VsZi5waG90b0xpc3RHcm91cC5maW5kKFwiLnBob3Rvcy1pdGVtOmZpcnN0XCIpO1xyXG5cclxuICAgIHNlbGYubGlzdGVuQWRkSW1hZ2VFdmVudChwaG90b0l0ZW0pO1xyXG4gICAgc2VsZi5saXN0ZW5DbG9zZUJ0bkV2ZW50KHBob3RvSXRlbSk7XHJcbiAgICBzZWxmLmxpc3RlblNhdmVQaG90b0J0bkV2ZW50KHBob3RvSXRlbSk7XHJcbiAgICBzZWxmLmxpc3RlbkV4dHJhY3REYXRhRXZlbnQocGhvdG9JdGVtKTtcclxufTtcclxuXHJcbi8vIOa3u+WKoOeCueWHu+a3u+WKoOWbvueJh+S6i+S7tlxyXG5QaG90b0ZpdC5wcm90b3R5cGUubGlzdGVuQWRkSW1hZ2VFdmVudCA9IGZ1bmN0aW9uIChwaG90b0l0ZW0pIHtcclxuICAgIHZhciB0aHVtYm5haWwgPSBwaG90b0l0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XHJcbiAgICB2YXIgaW1hZ2VJbnB1dCA9IHBob3RvSXRlbS5maW5kKFwiLmltYWdlLWlucHV0XCIpO1xyXG4gICAgLy8g5Lmf5Y+v5Lul6YCa6L+H5Lul5LiL5pa55byP54Wn5b2T5b2T5YmNdGh1bWJuYWls5ZCM57qn55qEaW1hZ2UtaW5wdXRcclxuICAgIC8vIHZhciBpbWFnZUlucHV0ID0gdGh1bWJuYWlsLnNpYmxpbmdzKFwiLmltYWdlLWlucHV0XCIpO1xyXG5cclxuICAgIC8vIOS4uuW9k+WJjeeahOWbvueJh+a3u+WKoOeCueWHu+S6i+S7tlxyXG4gICAgdGh1bWJuYWlsLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDkuLrlvZPliY3pgInkuK3nmoTlm77niYfmt7vliqDmiZPlvIDkuovku7bvvIzljbNjaGFuZ2UoKeS6i+S7tlxyXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOiOt+WPluW9k+WJjemAieS4reeahOaWh+S7tlxyXG4gICAgICAgIC8vIHRoaXMu5Luj6KGo5b2T5YmN55qEaW1hZ2UtaW5wdXRcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgLy8g6YCa6L+HRm9ybURhdGEoKeWHveaVsOWIm+W7uuS4gOS4quepuueahOWvueixoe+8jOS5i+WQjuWwseWPr+S7pemAmui/h2FwcGVuZCgpLHNldCgpLGdldCgp562J5a+56K+l5a+56LGh6L+b6KGM5re75Yqg77yM6K6+572u77yM6I635Y+W5pON5L2cXHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgLy8g5LiK5Lyg5Yiw5pys5Zyw5pyN5Yqh5Zmo55qE5o6l5Y+j5piv6YCa6L+HJ2ZpbGUnXHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICBhbnRhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogXCIvdXBsb2FkL2ZpbGUvXCIsXHJcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsLmF0dHIoJ3NyYycsdXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuLy8g55uR5ZCs5Yig6Zmk5Y2h54mH55qE5YWz6Zet5oyJ6ZKuXHJcblBob3RvRml0LnByb3RvdHlwZS5saXN0ZW5DbG9zZUJ0bkV2ZW50ID0gZnVuY3Rpb24gKHBob3RvSXRlbSkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gdmFyIGNsb3NlQnRuID0gJChcIi5jbG9zZS1idG5cIik7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSBwaG90b0l0ZW0uZmluZChcIi5jbG9zZS1idG5cIik7XHJcblxyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHZhciBwaG90b0l0ZW0gPSAkKFwiLnBob3Rvcy1pdGVtXCIpO1xyXG4gICAgICAgIC8vIHBob3RvSXRlbS5yZW1vdmUoKTtcclxuICAgICAgICB2YXIgcGhvdG9JZCA9IHBob3RvSXRlbS5hdHRyKFwiZGF0YS1waG90by1pZFwiKTtcclxuXHJcbiAgICAgICAgaWYgKHBob3RvSWQpIHtcclxuICAgICAgICAgICAgYW50YWxlcnQuYWxlcnRDb25maXJtKHtcclxuICAgICAgICAgICAgICAgICd0ZXh0JzogJ+aCqOehruWumuimgeWIoOmZpOivpeeFp+eJh+WQl++8n+aXoOazleaSpOmUgOWTpu+8gX5+ficsXHJcbiAgICAgICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFudGFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd1cmwnOiAnL2RlbC9waG90by8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwaG90b19pZCc6IHBob3RvSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG9JdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MocmVzdWx0WydtZXNzYWdlJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgcGhvdG9JdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy8g55uR5ZCs5L+d5a2Y5Y2h54mH55qE5LqL5Lu2XHJcblBob3RvRml0LnByb3RvdHlwZS5saXN0ZW5TYXZlUGhvdG9CdG5FdmVudCA9IGZ1bmN0aW9uIChwaG90b0l0ZW0pIHtcclxuICAgIHZhciBzYXZlQnRuID0gcGhvdG9JdGVtLmZpbmQoXCIuc2F2ZS1idG5cIik7XHJcbiAgICB2YXIgdGh1bWJuYWlsVGFnID0gcGhvdG9JdGVtLmZpbmQoXCIudGh1bWJuYWlsXCIpO1xyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g6I635Y+WaW1n5Zu+54mH55qEc3Jj5bGe5oCn5a+55bqU55qE5YC877yM5Y+q6ZyA6KaB6LCD55SoYXR0cigp5Ye95pWw5bCx5Y+v5Lul5LqG77yM5bm25LiN6ZyA6KaB6LCD55SodmFsKClcclxuICAgICAgICB2YXIgaW1nX3VybCA9IHRodW1ibmFpbFRhZy5hdHRyKFwic3JjXCIpO1xyXG4gICAgICAgIGFudGFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL3NhdmUvcGhvdG8vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnaW1nX3VybCc6IGltZ191cmwsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIuWbvueJh+S/neWtmOaIkOWKn++8gVwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0Wydjb2RlJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdFsnbWVzc2FnZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yWydtZXNzYWdlJ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5QaG90b0ZpdC5wcm90b3R5cGUubGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkUGhvdG9CdG4gPSAkKFwiI2FkZC1waG90by1idG5cIik7XHJcbiAgICBhZGRQaG90b0J0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5jcmVhdGVQaG90b0J0bkV2ZW50KCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIOebkeWQrOaPkOS6pOW9k+WJjeeFp+eJh+S6i+S7tlxyXG5QaG90b0ZpdC5wcm90b3R5cGUubGlzdGVuRXh0cmFjdERhdGFFdmVudCA9IGZ1bmN0aW9uIChwaG90b0l0ZW0pIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBleHRyYWN0RGF0YUJ0biA9IHBob3RvSXRlbS5maW5kKFwiLmV4dHJhY3QtZGF0YS1idG5cIik7XHJcblxyXG4gICAgZXh0cmFjdERhdGFCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHZhciB0cGwgPSB0ZW1wbGF0ZShcImRhdGEtaXRlbVwiKTtcclxuICAgICAgICAvLyBzZWxmLmRhdGFMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWxUYWcgPSBwaG90b0l0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XHJcblxyXG4gICAgICAgIC8vIOiOt+WPlmltZ+WbvueJh+eahHNyY+WxnuaAp+WvueW6lOeahOWAvO+8jOWPqumcgOimgeiwg+eUqGF0dHIoKeWHveaVsOWwseWPr+S7peS6hu+8jOW5tuS4jemcgOimgeiwg+eUqHZhbCgpXHJcbiAgICAgICAgdmFyIGltZ191cmwgPSB0aHVtYm5haWxUYWcuYXR0cihcInNyY1wiKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coaW1nX3VybCk7XHJcblxyXG4gICAgICAgIGFudGFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2V4dHJhY3QvZGF0YS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdpbWdfdXJsJzogaW1nX3VybCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi5Zu+54mH5aSE55CG5oiQ5Yqf77yB77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdFsnZGF0YSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuUGhvdG9GaXQucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5saXN0ZW5FeHRyYWN0RGF0YUV2ZW50KCk7XHJcbn07XHJcblxyXG5QaG90b0ZpdC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5BZGRCYW5uZXJFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5Mb2FkQWxsRGF0YUV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBwaG90byA9IG5ldyBQaG90b0ZpdCgpO1xyXG4gICAgcGhvdG8ucnVuKCk7XHJcbn0pOyJdfQ==
